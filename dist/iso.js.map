{"version":3,"file":"iso.js","sourceRoot":"","sources":["../src/iso.ts"],"names":[],"mappings":";;;;AAAA,+DAA0B;AAC1B,2BAA2C;AAC3C,+BAA4B;AAC5B,mCAA4C;AAC5C,2CAA+C;AAE/C,SAAgB,OAAO,CAAC,WAAmB,EAAE,SAAiB;IAC5D,OAAO,CAAC,GAAG,CAAC,eAAK,CAAC,IAAI,CAAC,iBAAiB,SAAS,MAAM,CAAC,CAAC,CAAC;IAE1D,IAAA,SAAG,EAAC,sEAAsE,SAAS,MAAM,WAAW,GAAG,CAAC,CAAC;IAEzG,IAAI,CAAC,IAAA,eAAU,EAAC,SAAS,CAAC,EAAE;QAC1B,OAAO,CAAC,GAAG,CAAC,eAAK,CAAC,GAAG,CAAC,mBAAmB,SAAS,EAAE,CAAC,CAAC,CAAC;QACvD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACjB;AACH,CAAC;AATD,0BASC;AAGD,SAAgB,eAAe,CAAE,EAAE,KAAK,EAAE,GAAG,EAAU;IACrD,MAAM,SAAS,GAAG,IAAA,4BAAgB,GAAE,CAAC;IACrC,IAAI,UAAU,GAAW,EAAE,CAAC;IAE5B,IAAI,GAAG,IAAI,CAAC,IAAA,cAAS,EAAC,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE;QACxC,IAAI,IAAA,eAAU,EAAC,GAAG,CAAC;YACjB,UAAU,GAAG,GAAG,CAAC;aACd,IAAI,IAAA,eAAU,EAAC,IAAA,eAAO,EAAC,GAAG,CAAC,CAAC;YAC/B,UAAU,GAAG,IAAA,eAAO,EAAC,GAAG,CAAC,CAAC;KAC7B;;QACC,UAAU,GAAG,IAAA,eAAO,EAAC,KAAK,CAAC,CAAC;IAE9B,OAAO,GAAG,UAAU,IAAI,IAAA,gBAAQ,EAAC,KAAK,CAAC,KAAK,SAAS,OAAO,CAAC;AAC/D,CAAC;AAbD,0CAaC","sourcesContent":["import chalk from \"chalk\";\nimport { existsSync, lstatSync } from \"fs\";\nimport { cmd } from \"./cmd\";\nimport { basename, dirname } from \"./paths\";\nimport { getDateTimestamp } from \"./timestamp\";\n\nexport function makeISO(inputFolder: string, outputISO: string) {\n  console.log(chalk.blue(`Creating ISO '${outputISO}'...`));\n\n  cmd(`mkisofs -allow-limited-size -iso-level 4 -J -joliet-long -l -R -o \"${outputISO}\" \"${inputFolder}\"`);\n\n  if (!existsSync(outputISO)) {\n    console.log(chalk.red(`ISO not exists! ${outputISO}`));\n    process.exit(1);\n  }\n}\n\ntype Params = { input: string; out: string };\nexport function calculateOutput( { input, out }: Params) {\n  const TIMESTAMP = getDateTimestamp();\n  let OUT_FOLDER: string = \"\";\n\n  if (out && !lstatSync(out).isDirectory()) {\n    if (existsSync(out))\n      OUT_FOLDER = out;\n    else if (existsSync(dirname(out)))\n      OUT_FOLDER = dirname(out);\n  } else\n    OUT_FOLDER = dirname(input);\n\n  return `${OUT_FOLDER}/${basename(input)} [${TIMESTAMP}].iso`;\n}\n"]}